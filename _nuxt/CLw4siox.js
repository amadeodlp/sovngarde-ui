import{G as h}from"./C7VPM9Ik.js";import{a as l}from"./t--hEgTQ.js";/*! js-cookie v3.0.5 | MIT */function u(e){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var a in c)e[a]=c[a]}return e}var g={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function f(e,o){function c(n,s,r){if(!(typeof document>"u")){r=u({},o,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var t="";for(var i in r)r[i]&&(t+="; "+i,r[i]!==!0&&(t+="="+r[i].split(";")[0]));return document.cookie=n+"="+e.write(s,n)+t}}function a(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var s=document.cookie?document.cookie.split("; "):[],r={},t=0;t<s.length;t++){var i=s[t].split("="),d=i.slice(1).join("=");try{var p=decodeURIComponent(i[0]);if(r[p]=e.read(d,p),n===p)break}catch{}}return n?r[n]:r}}return Object.create({set:c,get:a,remove:function(n,s){c(n,"",u({},s,{expires:-1}))},withAttributes:function(n){return f(this.converter,u({},this.attributes,n))},withConverter:function(n){return f(u({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(e)}})}var v=f(g,{path:"/"});const x=h("auth",{state:()=>({isAuthenticated:!1,username:"",userType:"",error:null}),getters:{isDeveloper:e=>e.userType==="developer",isGamer:e=>e.userType==="gamer"},actions:{async login(e){try{const o=await l.post("/api/login",e);o.status===200&&(this.isAuthenticated=!0,this.username=e.username,this.userType=o.data.userType,this.error=null)}catch{this.error="Invalid credentials"}},async logout(){try{await l.post("/api/logout")}catch(e){console.error("Logout failed:",e)}finally{this.isAuthenticated=!1,this.username="",this.userType="",v.remove("auth-token")}},clearError(){this.error=null}}});export{x as u};
